\RequirePackage{keyval}
\RequirePackage{pgfmath}
\RequirePackage{ifthen}

\mode<presentation>

% http://tex.stackexchange.com/questions/140230/why-a-calc-operation-in-width-of-beamercolorbox-doesnt-work
%\define@key{beamercolbox}{wd}{\pgfmathsetlengthmacro\beamer@colbox@wd{#1}}
%\define@key{beamercolbox}{ht}{\pgfmathsetlengthmacro\beamer@colbox@ht{#1}}
%\define@key{beamercolbox}{dp}{\pgfmathsetlengthmacro\beamer@colbox@dp{#1}}
%\define@key{beamercolbox}{leftskip}{\pgfmathsetlengthmacro\beamer@colbox@leftskip{#1}}
%\define@key{beamercolbox}{rightskip}{\pgfmathsetlengthmacro\beamer@colbox@rightskip{#1}}

% Frame title
\defbeamertemplate*{frametitle}{texsx}[1][]
{
\vskip7mm%
  \begin{beamercolorbox}[leftskip=7mm,wd={\paperwidth},ht=10mm]{frametitle} 
  \begin{tikzpicture}[
      title/.style={
        inner xsep=0,
        inner ysep=1pt,
        outer sep=0,
        align=right,
      },
    ]
    \useasboundingbox[fill=none] (0,0) rectangle ++(\dimexpr\paperwidth-14mm\relax,1);
     \ifx\insertframesubtitle\@empty{
     	\node[title, anchor=east, mainblue,font=\usebeamerfont{frametitle}, text width=\dimexpr\the\paperwidth-14mm-20mm\relax] at (current bounding box.east) {\vphantom{Ag}\insertframetitle\vphantom{Ag}};}
      \else%
      {\node[title, anchor= north east, mainblue,font=\usebeamerfont{frametitle}] at (current bounding box.north east){\vphantom{Ag}\insertframetitle\vphantom{Ag}};%
       \node[title, anchor= south east, mainblue,font=\usebeamerfont{framesubtitle}] at (current bounding box.south east){\vphantom{Ag}\insertframesubtitle\vphantom{Ag}};}%
      \fi
  \end{tikzpicture}
  \end{beamercolorbox}
}

\defbeamertemplate*{headline}{texsx}{
\begin{tikzpicture}[overlay]
\ifthenelse{ \c@framenumber=1 }
    {%
\node[inner sep=0, outer sep=0, anchor=north west] at (7mm,-7mm) {\includegraphics[height=10mm]{UoB_Logo_white}};
\node[inner sep=0, outer sep=0, anchor=south east] at (\the\paperwidth-7mm,-\the\paperheight+7mm) {\includegraphics[height=10mm]{BRIDGE_logo}};
    }
    {%
\node[inner sep=0, outer sep=0, anchor=north west] at (7mm,-7mm) {\includegraphics[height=10mm]{BRIDGE_logo}};
    }
\end{tikzpicture}
}

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\defbeamertemplate*{footline}{texsx}
{%
\begin{tikzpicture}
    \useasboundingbox[fill=none, anchor=south west, ] (0,0) rectangle (\the\paperwidth,11mm);

\ifnum\c@framenumber>1%
\ifbeamer@framenumber
	\node[anchor=east, inner xsep=7mm, inner ysep= 0, outer sep=0, color=footline.fg, font=\usebeamerfont{frame number in foot}] at (current bounding box.east) {\vphantom{Ag}\insertframenumber{}\ifbeamer@totalframenumber\slash \inserttotalframenumber{}\fi};
    \fi
    \fi
    
%  {%
%   % \pgftext[right,bottom,at=\posUlogoFoot]{\pgfuseimage{ULogo}}%
%  }
%  % *** ELSE *** light footline
%  {%
%     % conditionally put the ua text logo on the page
%    \ifthenelse{\c@framenumber=1 \OR \NOT \boolean{beamer@compress}}
%    {\pgftext[left,bottom,at=\uTextColorPosLight]{\pgfuseimage{uTextColor}}}%
%    {}%

%    % bottom wave
%    \pgftext[right,bottom,at=\uWavePos]{\pgfuseimage{uWave}}%

%    % page number
%    \ifbeamer@framenumber%
%      \ifnum\c@framenumber=1\else
%        \pgftext[right,bottom,at=\pgfpoint{0.98\paperwidth}{0.02\paperwidth}]{%
%          \usebeamerfont{frame number in foot}%
%          \usebeamercolor[fg]{frame number in foot}\insertframenumber{}%
%          \ifbeamer@totalframenumber%
%            /\inserttotalframenumber%
%          \fi
%        }%
%      \fi
%    \fi%
%    }
    \end{tikzpicture}
}%
% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

\mode<all>